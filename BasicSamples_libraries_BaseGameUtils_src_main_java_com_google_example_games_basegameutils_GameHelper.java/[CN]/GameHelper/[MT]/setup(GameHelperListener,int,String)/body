{
  if (mState != STATE_UNCONFIGURED) {
    String error="GameHelper: you called GameHelper.setup() twice. You can only call " + "it once.";
    logError(error);
    throw new IllegalStateException(error);
  }
  mListener=listener;
  mRequestedClients=clientsToUse;
  debugLog("Setup: requested clients: " + mRequestedClients);
  Vector<String> scopesVector=new Vector<String>();
  if (0 != (clientsToUse & CLIENT_GAMES)) {
    scopesVector.add(Scopes.GAMES);
  }
  if (0 != (clientsToUse & CLIENT_PLUS)) {
    scopesVector.add(Scopes.PLUS_LOGIN);
  }
  if (0 != (clientsToUse & CLIENT_APPSTATE)) {
    scopesVector.add(Scopes.APP_STATE);
  }
  if (null != additionalScopes) {
    for (    String scope : additionalScopes) {
      scopesVector.add(scope);
    }
  }
  mScopes=new String[scopesVector.size()];
  scopesVector.copyInto(mScopes);
  debugLog("setup: scopes:");
  for (  String scope : mScopes) {
    debugLog("  - " + scope);
  }
  if (0 != (clientsToUse & CLIENT_GAMES)) {
    debugLog("setup: creating GamesClient");
    mGamesClient=new GamesClient.Builder(getContext(),this,this).setGravityForPopups(Gravity.TOP | Gravity.CENTER_HORIZONTAL).setScopes(mScopes).create();
  }
  if (0 != (clientsToUse & CLIENT_PLUS)) {
    debugLog("setup: creating GamesPlusClient");
    mPlusClient=new PlusClient.Builder(getContext(),this,this).setScopes(mScopes).build();
  }
  if (0 != (clientsToUse & CLIENT_APPSTATE)) {
    debugLog("setup: creating AppStateClient");
    mAppStateClient=new AppStateClient.Builder(getContext(),this,this).setScopes(mScopes).create();
  }
  setState(STATE_DISCONNECTED);
}
