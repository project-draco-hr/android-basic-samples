{
  debugLog("onStop, state = " + STATE_NAMES[mState]);
  assertState("onStop",STATE_DISCONNECTED,STATE_CONNECTING,STATE_CONNECTED);
switch (mState) {
case STATE_CONNECTED:
case STATE_CONNECTING:
    debugLog("onStop: Killing connections");
  killConnections();
break;
case STATE_DISCONNECTED:
debugLog("onStop: not connected, so no action taken.");
break;
default :
String msg="onStop: BUG: unexpected state " + STATE_NAMES[mState];
Log.e(mDebugTag,msg);
throw new IllegalStateException(msg);
}
mActivity=null;
}
